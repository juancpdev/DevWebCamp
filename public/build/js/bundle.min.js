function autocompletadoFormulario(){document.querySelectorAll(".formulario__input").forEach(e=>{e.addEventListener("input",(function(){const e=this.nextElementSibling;this.value?e.classList.add("formulario__label--active"):e.classList.remove("formulario__label--active")}))})}function modalAuth(){const e=document.querySelectorAll(".auth"),o=document.querySelector("#login"),t=document.querySelector("#registro"),a=document.querySelector("#olvide"),l=document.querySelectorAll(".login"),r=document.querySelectorAll(".registro"),n=document.querySelectorAll(".olvide"),i=document.querySelectorAll(".modal__close");abrirModal(l,o,t,a),abrirModal(r,t,o,a),abrirModal(n,a,o,t),i.forEach(e=>{e.addEventListener("click",(function(){cerrarModal();const e=this.closest(".modal");setTimeout(()=>{e.style.display="none",document.body.style.overflow="auto",e.querySelector("form").reset()},200)}))}),window.addEventListener("click",(function(o){e.forEach(e=>{o.target===e&&(cerrarModal(),setTimeout(()=>{document.querySelectorAll(".modal").forEach(e=>{e.style.display="none",document.body.style.overflow="auto",e.querySelector("form").reset()})},200))})}))}function abrirModal(e,o,t,a){e.forEach(e=>{e.addEventListener("click",(function(e){e.preventDefault(),cambiarModal(),reiniciarFormu(t,a),modalAnimacion(o,t,a)}))})}function modalAnimacion(e,o,t){e.style.display="block",o.style.display="none",t.style.display="none",document.body.style.overflow="hidden",setTimeout(()=>{e.children[0].children[0].classList.toggle("animar")},50)}function cerrarModal(){limpiarAlertas(),limpiarLabels(),setTimeout(()=>{document.querySelectorAll(".auth__modal").forEach(e=>{e.classList.remove("animar")})},0)}function cambiarModal(){limpiarAlertas(),limpiarLabels();const e=document.querySelectorAll(".acciones__enlace"),o=document.querySelectorAll(".auth__modal");e.forEach(e=>{e.addEventListener("click",(function(e){o.forEach(e=>{e.classList.remove("animar")})}))})}function reiniciarFormu(e,o){e.querySelector("form").reset(),o.querySelector("form").reset()}function limpiarLabels(){document.querySelectorAll("#registro .formulario__label").forEach(e=>{e.classList.remove("formulario__label--active")})}function limpiarAlertas(){document.getElementById("alertas-container").innerHTML=""}document.addEventListener("DOMContentLoaded",(function(){autocompletadoFormulario(),modalAuth()})),function(){let e="",o="",t="";async function a(a){const l=new FormData;l.append("nombre",a.elements.nombre.value),l.append("apellido",a.elements.apellido.value),l.append("email",a.elements.email.value),l.append("password",a.elements.password.value),l.append("password2",a.elements.password2.value);const r=await fetch("/api/usuarios/registro",{method:"POST",body:l});try{const l=await r.json();if("error"===l.tipo)e=a.elements.nombre.value,o=a.elements.apellido.value,t=a.elements.email.value,a.elements.password.value="",a.elements.password2.value="",function(e){const o=document.getElementById("alertas-container");o.innerHTML="",e&&e.length>0&&setTimeout(()=>{const t=document.createElement("div");t.classList.add("alert","alert-danger");const a=document.createElement("ul");e.forEach(e=>{const o=document.createElement("li");o.textContent=e,a.appendChild(o)}),t.appendChild(a),o.appendChild(t)},200)}(l.alertas.error);else if("exito"===l.tipo){a.elements.nombre.value=e,a.elements.apellido.value=o,a.elements.email.value=t,a.elements.password.value="",a.elements.password2.value="",console.log(l.datos),cerrarModal();document.querySelectorAll(".modal").forEach(e=>{e.style.display="none"}),Swal.fire({icon:"success",title:"Usuario Registrado",text:"Verifica tu mail para confirmar la cuenta",confirmButtonText:"OK",willClose:()=>{document.body.style.overflow="auto"}})}}catch(e){console.error("Error al analizar la respuesta JSON del servidor")}}const l=document.querySelector("#registro .formulario"),r=document.querySelector("#login .formulario"),n=document.querySelector("#olvide .formulario");l.addEventListener("submit",(function(e){e.preventDefault(),a(l)})),r.addEventListener("submit",(function(e){e.preventDefault(),async function(e){const o=new FormData;o.append("email",e.elements.email.value),o.append("password",e.elements.password.value);const t=await fetch("/api/usuarios/login",{method:"POST",body:o});await t.json()}(r)})),n.addEventListener("submit",(function(e){e.preventDefault(),async function(e){const o=new FormData;o.append("email",e.elements.email.value);const t=await fetch("/api/usuarios/olvidePassword",{method:"POST",body:o});await t.json()}(n)})),window.resetearFormulario=function(){const e=document.querySelector(".auth__modal .formulario");resetearFormulario(e)}}();
//# sourceMappingURL=bundle.js.map
