function seleccionarArchivo(){document.getElementById("imagenPonente").click()}function mostrarNombreArchivo(){var e=document.getElementById("imagenPonente"),o=document.getElementById("mensajeArchivo"),t=e.files.length>0?e.files[0].name:"No se ha seleccionado ningún archivo.";o.textContent=t}function autocompletadoFormulario(){document.querySelectorAll(".formulario__input").forEach(e=>{e.addEventListener("input",(function(){const e=this.nextElementSibling;this.value?e.classList.add("formulario__label--active"):e.classList.remove("formulario__label--active")}))})}function modalAuth(){const e=document.querySelectorAll(".auth"),o=document.querySelector("#login"),t=document.querySelector("#registro"),a=document.querySelector("#olvide"),l=document.querySelectorAll(".login"),r=document.querySelectorAll(".registro"),n=document.querySelectorAll(".olvide"),i=document.querySelectorAll(".modal__close");abrirModal(l,o,t,a),abrirModal(r,t,o,a),abrirModal(n,a,o,t),i.forEach(e=>{e.addEventListener("click",(function(){cerrarModal();const e=this.closest(".modal");setTimeout(()=>{e.style.display="none",document.body.style.overflow="auto",e.querySelector("form").reset()},200)}))}),window.addEventListener("click",(function(o){e.forEach(e=>{o.target===e&&(cerrarModal(),setTimeout(()=>{document.querySelectorAll(".modal").forEach(e=>{e.style.display="none",document.body.style.overflow="auto",e.querySelector("form").reset()})},200))})}))}function abrirModal(e,o,t,a){e.forEach(e=>{e.addEventListener("click",(function(e){e.preventDefault(),cambiarModal(),reiniciarFormu(t,a),modalAnimacion(o,t,a)}))})}function modalAnimacion(e,o,t){e.style.display="block",o.style.display="none",t.style.display="none",document.body.style.overflow="hidden",setTimeout(()=>{e.children[0].children[0].classList.toggle("animar")},50)}function cerrarModal(){limpiarAlertas("Registro"),limpiarAlertas("Login"),limpiarAlertas("Olvide"),limpiarLabels("registro"),limpiarLabels("login"),limpiarLabels("olvide"),setTimeout(()=>{document.querySelectorAll(".auth__modal").forEach(e=>{e.classList.remove("animar")})},0)}function cambiarModal(){limpiarAlertas("Registro"),limpiarAlertas("Login"),limpiarAlertas("Olvide"),limpiarLabels("registro"),limpiarLabels("login"),limpiarLabels("olvide");const e=document.querySelectorAll(".acciones__enlace"),o=document.querySelectorAll(".auth__modal");e.forEach(e=>{e.addEventListener("click",(function(e){o.forEach(e=>{e.classList.remove("animar")})}))})}function reiniciarFormu(e,o){e.querySelector("form").reset(),o.querySelector("form").reset()}function limpiarLabels(e){document.querySelectorAll("#"+e+" .formulario__label").forEach(e=>{e.classList.remove("formulario__label--active")})}function limpiarAlertas(e){["Nombre","Apellido","Email","Email2","Password","Password2"].forEach(o=>{const t=document.getElementById("alerta"+o+e),a=document.getElementById(o.toLowerCase()+e),l=document.getElementById(o.toLowerCase()+e+"Icono");t&&(t.textContent="",t.classList.remove("error")),a&&a.classList.remove("error-input"),l&&l.classList.remove("error-icono")})}document.addEventListener("DOMContentLoaded",(function(){autocompletadoFormulario(),modalAuth()})),function(){async function e(e){document.querySelectorAll(".spinner-contenedor").forEach(e=>{e.style.display="flex"});const o=new FormData;o.append("nombre",e.elements.nombre.value),o.append("apellido",e.elements.apellido.value),o.append("email",e.elements.email.value),o.append("password",e.elements.password.value),o.append("password2",e.elements.password2.value);const a=await fetch("/api/usuarios/registro",{method:"POST",body:o});try{const o=await a.json();if("error"===o.tipo)e.elements.nombre.value,e.elements.apellido.value,e.elements.email.value,e.elements.password.value="",e.elements.password2.value="",t(o.alertas.error,"Registro");else if("exito"===o.tipo){e.elements.nombre.value="",e.elements.apellido.value="",e.elements.email.value="",e.elements.password.value="",e.elements.password2.value="",cerrarModal();document.querySelectorAll(".modal").forEach(e=>{e.style.display="none"}),Swal.fire({icon:"success",title:"Usuario Registrado",text:"Verifica tu mail para confirmar la cuenta",confirmButtonText:"OK",willClose:()=>{document.body.style.overflow="auto"}})}}catch(e){console.error("Error al analizar la respuesta JSON del servidor")}finally{document.querySelectorAll(".spinner-contenedor").forEach(e=>{e.style.display="none"})}}async function o(e){document.querySelectorAll(".spinner-contenedor").forEach(e=>{e.style.display="flex"});const o=new FormData;o.append("email",e.elements.email.value);const a=await fetch("/api/usuarios/olvidePassword",{method:"POST",body:o});try{const o=await a.json();if("error"===o.tipo)e.elements.email.value,t(o.alertas.error,"Olvide");else if("exito"===o.tipo){e.elements.email.value="",cerrarModal();document.querySelectorAll(".modal").forEach(e=>{e.style.display="none"}),Swal.fire({icon:"success",title:"Verifica tu email",text:"Verifica tu mail para cambiar el password",confirmButtonText:"OK",willClose:()=>{document.body.style.overflow="auto"}})}}catch(e){console.error("Error al analizar la respuesta JSON del servidor")}finally{document.querySelectorAll(".spinner-contenedor").forEach(e=>{e.style.display="none"})}}function t(e,o){["Nombre","Apellido","Email","Email2","Password","Password2","Ciudad","Pais","Imagen","Tags"].forEach(e=>{const t=document.getElementById("alerta"+e+o),a=document.getElementById(e.toLowerCase()+o),l=document.getElementById(e.toLowerCase()+o+"Icono");t&&(t.textContent="",t.classList.remove("error")),a&&a.classList.remove("error-input"),l&&l.classList.remove("error-icono")}),e&&e.length>0&&e.forEach(e=>{let t="";e.includes("Nombre")?t="Nombre":e.includes("Apellido")?t="Apellido":e.includes("Email")?t="Email":e.includes("mayor")?t="Password":e.includes("coinciden")?t="Password2":e.includes("registrado")?t="Email2":e.includes("Incorrecto")?t="Password2":e.includes("confirmado")?t="Email2":e.includes("Ciudad")?t="Ciudad":e.includes("País")?t="Pais":e.includes("Imagen")?t="Imagen":e.includes("incluir")&&(t="Tags");const a=document.getElementById("alerta"+t+o),l=document.getElementById(t.toLowerCase()+o),r=document.getElementById(t.toLowerCase()+o+"Icono");a&&(a.textContent=e,setTimeout(()=>{a.classList.add("error")},0)),l&&l.classList.add("error-input"),r&&r.classList.add("error-icono")})}const a=document.querySelector("#registro .formulario"),l=document.querySelector("#login .formulario"),r=document.querySelector("#olvide .formulario");a&&a.addEventListener("submit",(function(o){o.preventDefault(),e(a)})),l&&l.addEventListener("submit",(function(e){e.preventDefault(),async function(e){const o=new FormData;o.append("email",e.elements.email.value),o.append("password",e.elements.password.value);const a=await fetch("/api/usuarios/login",{method:"POST",body:o});try{const o=await a.json();if("error"===o.tipo)e.elements.email.value,e.elements.password.value="",t(o.alertas.error,"Login");else if("exito"===o.tipo){e.elements.email.value="",e.elements.password.value="",cerrarModal();document.querySelectorAll(".modal").forEach(e=>{e.style.display="none"}),"1"===o.datos.admin?window.location.href="/admin/dashboard":window.location.href="/finalizar-registro"}}catch(e){console.error("Error al analizar la respuesta JSON del servidor")}}(l)})),r&&r.addEventListener("submit",(function(e){e.preventDefault(),o(r)})),window.resetearFormulario=function(){const e=document.querySelector(".auth__modal .formulario");resetearFormulario(e)},window.mostrarAlertas=t}(),function(){const e=document.querySelector("#ponentes .formulario");e&&e.addEventListener("submit",(function(o){o.preventDefault(),async function(e){const o=new FormData;o.append("nombre",e.elements.nombre.value),o.append("apellido",e.elements.apellido.value),o.append("ciudad",e.elements.ciudad.value),o.append("pais",e.elements.pais.value),o.append("imagen",e.elements.imagen.value),o.append("tags",e.elements.tags.value);const t=await fetch("/admin/ponentes/crear",{method:"POST",body:o});try{const o=await t.json();if("error"===o.tipo){e.elements.nombre.value,e.elements.apellido.value,e.elements.ciudad.value,e.elements.pais.value,mostrarAlertas(o.alertas.error,"Ponente");const t=document.querySelector(".formulario__legend");t&&t.scrollIntoView({behavior:"smooth",block:"start"})}else"exito"===o.tipo&&(e.elements.nombre.value="",e.elements.apellido.value="",e.elements.ciudad.value="",e.elements.pais.value="",console.log("Ponente creado"))}catch(e){console.error("Error al analizar la respuesta JSON del servidor",e)}}(e)}))}(),function(){const e=document.querySelector("#tags_input");if(e){const a=document.querySelector("#tags"),l=document.querySelector('[name="tags"]');let r=[];function o(e){e.target.remove(),r=r.filter(o=>o!==e.target.textContent),t()}function t(){l.value=r.toString()}e.addEventListener("keypress",(function(l){if(44===l.keyCode){if(""===l.target.value.trim()||l.target.value<1||r.includes(l.target.value))return l.preventDefault(),void(l.target.value="");l.preventDefault(),r=[...r,l.target.value.trim()],e.value="",a.textContent="",r.forEach(e=>{const t=document.createElement("LI");t.classList.add("formulario__tag"),t.textContent=e,t.ondblclick=o,a.appendChild(t)}),t()}}))}}();
//# sourceMappingURL=bundle.js.map
