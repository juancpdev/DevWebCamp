function autocompletadoFormulario(){document.querySelectorAll(".formulario__input").forEach(e=>{e.addEventListener("input",(function(){const e=this.nextElementSibling;this.value?e.classList.add("formulario__label--active"):e.classList.remove("formulario__label--active")}))})}function modalAuth(){const e=document.querySelectorAll(".auth"),o=document.querySelector("#login"),t=document.querySelector("#registro"),l=document.querySelector("#olvide"),a=document.querySelectorAll(".login"),r=document.querySelectorAll(".registro"),n=document.querySelectorAll(".olvide"),i=document.querySelectorAll(".modal__close");abrirModal(a,o,t,l),abrirModal(r,t,o,l),abrirModal(n,l,o,t),i.forEach(e=>{e.addEventListener("click",(function(){cerrarModal();const e=this.closest(".modal");setTimeout(()=>{e.style.display="none",document.body.style.overflow="auto",e.querySelector("form").reset()},200)}))}),window.addEventListener("click",(function(o){e.forEach(e=>{o.target===e&&(cerrarModal(),setTimeout(()=>{document.querySelectorAll(".modal").forEach(e=>{e.style.display="none",document.body.style.overflow="auto",e.querySelector("form").reset()})},200))})}))}function abrirModal(e,o,t,l){e.forEach(e=>{e.addEventListener("click",(function(e){e.preventDefault(),cambiarModal(),reiniciarFormu(t,l),modalAnimacion(o,t,l)}))})}function modalAnimacion(e,o,t){e.style.display="block",o.style.display="none",t.style.display="none",document.body.style.overflow="hidden",setTimeout(()=>{e.children[0].children[0].classList.toggle("animar")},50)}function cerrarModal(){limpiarAlertas(),limpiarLabels(),setTimeout(()=>{document.querySelectorAll(".auth__modal").forEach(e=>{e.classList.remove("animar")})},0)}function cambiarModal(){limpiarAlertas(),limpiarLabels();const e=document.querySelectorAll(".acciones__enlace"),o=document.querySelectorAll(".auth__modal");e.forEach(e=>{e.addEventListener("click",(function(e){o.forEach(e=>{e.classList.remove("animar")})}))})}function reiniciarFormu(e,o){e.querySelector("form").reset(),o.querySelector("form").reset()}function limpiarLabels(){document.querySelectorAll("#registro .formulario__label").forEach(e=>{e.classList.remove("formulario__label--active")})}function limpiarAlertas(){document.querySelectorAll(".error").forEach(e=>{e.innerHTML=""})}document.addEventListener("DOMContentLoaded",(function(){autocompletadoFormulario(),modalAuth()})),function(){async function e(e){const o=new FormData;o.append("nombre",e.elements.nombre.value),o.append("apellido",e.elements.apellido.value),o.append("email",e.elements.email.value),o.append("password",e.elements.password.value),o.append("password2",e.elements.password2.value);const t=await fetch("/api/usuarios/registro",{method:"POST",body:o});try{const o=await t.json();if("error"===o.tipo)nombreOriginal=e.elements.nombre.value,apellidoOriginal=e.elements.apellido.value,emailOriginal=e.elements.email.value,e.elements.password.value="",e.elements.password2.value="",l=o.alertas.error,["Nombre","Apellido","Email","Password","Password2"].forEach(e=>{const o=document.getElementById("alerta"+e+"Registro");o&&(o.textContent="")}),l&&l.length>0&&l.forEach(e=>{let o="";e.includes("Nombre")?o="Nombre":e.includes("Apellido")?o="Apellido":e.includes("Email")?o="Email":e.includes("mayor")?o="Password":e.includes("coinciden")?o="Password2":e.includes("registrado")&&(o="Email2");const t=document.getElementById("alerta"+o+"Registro");t&&(t.textContent=e)});else if("exito"===o.tipo){e.elements.nombre.value="",e.elements.apellido.value="",e.elements.email.value="",e.elements.password.value="",e.elements.password2.value="",console.log(o.datos),cerrarModal();document.querySelectorAll(".modal").forEach(e=>{e.style.display="none"}),Swal.fire({icon:"success",title:"Usuario Registrado",text:"Verifica tu mail para confirmar la cuenta",confirmButtonText:"OK",willClose:()=>{document.body.style.overflow="auto"}})}}catch(e){console.error("Error al analizar la respuesta JSON del servidor")}var l}const o=document.querySelector("#registro .formulario"),t=document.querySelector("#login .formulario"),l=document.querySelector("#olvide .formulario");o.addEventListener("submit",(function(t){t.preventDefault(),e(o)})),t.addEventListener("submit",(function(e){e.preventDefault(),async function(e){const o=new FormData;o.append("email",e.elements.email.value),o.append("password",e.elements.password.value);const t=await fetch("/api/usuarios/login",{method:"POST",body:o});await t.json()}(t)})),l.addEventListener("submit",(function(e){e.preventDefault(),async function(e){const o=new FormData;o.append("email",e.elements.email.value);const t=await fetch("/api/usuarios/olvidePassword",{method:"POST",body:o});await t.json()}(l)})),window.resetearFormulario=function(){const e=document.querySelector(".auth__modal .formulario");resetearFormulario(e)}}();
//# sourceMappingURL=bundle.js.map
