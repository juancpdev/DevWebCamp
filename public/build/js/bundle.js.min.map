{"version":3,"sources":["app.js","auth.js"],"names":["autocompletadoFormulario","document","querySelectorAll","forEach","input","addEventListener","label","this","nextElementSibling","value","classList","add","remove","modalAuth","fondoNegro","modalLogin","querySelector","modalRegistro","modalOlvide","btnLogin","btnRegistro","btnOlvide","btnCerrar","abrirModal","btn","cerrarModal","modal","closest","setTimeout","style","display","body","overflow","reset","window","event","fondo","target","botonActual","modalActual","modal1","modal2","e","preventDefault","cambiarModal","reiniciarFormu","modalAnimacion","modal3","children","toggle","limpiarAlertas","limpiarLabels","formu","acciones","auth","accion","getElementById","innerHTML","nombreOriginal","apellidoOriginal","emailOriginal","async","manejarFormularioRegistro","formulario","datos","FormData","append","elements","respuesta","fetch","method","resultado","json","tipo","alertas","alertasContainer","length","alertasDiv","createElement","ul","alerta","li","textContent","appendChild","mostrarAlertas","error","console","log","Swal","fire","icon","title","text","confirmButtonText","willClose","formularioRegistro","formularioLogin","formularioOlvidePassword","manejarFormularioLogin","manejarFormularioOlvidePassword","resetearFormulario","formularioActual"],"mappings":"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","file":"bundle.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function() {\r\n    autocompletadoFormulario();\r\n    modalAuth();\r\n})\r\n\r\nfunction autocompletadoFormulario() {\r\n    // Selecciona todos los inputs\r\n    const inputs = document.querySelectorAll('.formulario__input');\r\n    \r\n    inputs.forEach(input => {\r\n        input.addEventListener('input', function() {\r\n            const label = this.nextElementSibling; // Suponiendo que el label siempre viene después del input\r\n       \r\n            // Si el input tiene contenido, mueve el label hacia arriba\r\n            if (this.value) {\r\n                label.classList.add('formulario__label--active');\r\n            } else {\r\n                label.classList.remove('formulario__label--active');\r\n            }\r\n        });\r\n    });\r\n\r\n}\r\n\r\nfunction modalAuth() {\r\n    const fondoNegro = document.querySelectorAll(\".auth\");\r\n\r\n    const modalLogin = document.querySelector(\"#login\");\r\n    const modalRegistro = document.querySelector(\"#registro\");\r\n    const modalOlvide = document.querySelector(\"#olvide\");\r\n\r\n    const btnLogin = document.querySelectorAll(\".login\");\r\n    const btnRegistro = document.querySelectorAll(\".registro\");\r\n    const btnOlvide = document.querySelectorAll(\".olvide\");\r\n    const btnCerrar = document.querySelectorAll(\".modal__close\");\r\n\r\n    abrirModal(btnLogin, modalLogin, modalRegistro, modalOlvide);\r\n    abrirModal(btnRegistro, modalRegistro, modalLogin, modalOlvide);\r\n    abrirModal(btnOlvide, modalOlvide, modalLogin, modalRegistro);\r\n\r\n    btnCerrar.forEach(btn => {\r\n        btn.addEventListener(\"click\", function() {\r\n            cerrarModal();\r\n            const modal = this.closest(\".modal\");\r\n            setTimeout(() => {\r\n                modal.style.display = \"none\";\r\n                document.body.style.overflow = \"auto\";\r\n                modal.querySelector(\"form\").reset();\r\n            }, 200);\r\n        });\r\n    });\r\n\r\n    window.addEventListener(\"click\", function(event) {\r\n        fondoNegro.forEach(fondo => {\r\n            if (event.target === fondo) {\r\n                cerrarModal();\r\n\r\n                setTimeout(() => {\r\n                    const modales = document.querySelectorAll(\".modal\");\r\n                    modales.forEach(modal => {\r\n                        modal.style.display = \"none\";\r\n                        document.body.style.overflow = \"auto\"; // Permite el desplazamiento de nuevo\r\n                        modal.querySelector(\"form\").reset();\r\n                    })\r\n                }, 200);\r\n            }\r\n        })\r\n    });\r\n}\r\n\r\nfunction abrirModal(botonActual, modalActual, modal1, modal2) {\r\n    botonActual.forEach(btn => {\r\n        btn.addEventListener(\"click\", function(e) {\r\n            e.preventDefault();\r\n\r\n            cambiarModal();\r\n\r\n            // Agrega esta línea para restablecer el formulario dentro del otro modal\r\n            reiniciarFormu(modal1, modal2);\r\n            modalAnimacion(modalActual, modal1, modal2);\r\n        });\r\n    });\r\n}\r\n\r\nfunction modalAnimacion(modal, modal2, modal3) {\r\n    modal.style.display = \"block\";\r\n    modal2.style.display = \"none\";\r\n    modal3.style.display = \"none\";\r\n\r\n    document.body.style.overflow = \"hidden\"; // Evita el desplazamiento\r\n\r\n    setTimeout(() => {\r\n        modal.children[0].children[0].classList.toggle(\"animar\");\r\n    }, 50);\r\n}\r\n\r\nfunction cerrarModal() {\r\n    limpiarAlertas();\r\n    limpiarLabels();\r\n    setTimeout(() => {\r\n        const auth = document.querySelectorAll(\".auth__modal\");\r\n        auth.forEach(formu => {\r\n            formu.classList.remove(\"animar\");\r\n        })\r\n    }, 0);\r\n}\r\n\r\n\r\nfunction cambiarModal() {\r\n    limpiarAlertas();\r\n    limpiarLabels();\r\n    const acciones = document.querySelectorAll(\".acciones__enlace\");\r\n    const auth = document.querySelectorAll(\".auth__modal\");\r\n    \r\n    acciones.forEach(accion => {\r\n        accion.addEventListener(\"click\", function(e) {\r\n            auth.forEach(modal => {\r\n                modal.classList.remove(\"animar\");\r\n            })\r\n        });\r\n    });\r\n\r\n}\r\n\r\nfunction reiniciarFormu(modal1, modal2) {\r\n    // Agrega esta línea para restablecer el formulario dentro del otro modal\r\n    modal1.querySelector(\"form\").reset();\r\n    modal2.querySelector(\"form\").reset();\r\n}\r\n\r\nfunction limpiarLabels() {\r\n    // Seleccionar solo los labels dentro del formulario de registro\r\n    const labels = document.querySelectorAll('#registro .formulario__label');\r\n\r\n    labels.forEach(label => {\r\n        label.classList.remove(\"formulario__label--active\");\r\n    })\r\n}\r\n\r\nfunction limpiarAlertas() {\r\n    const alertasContainer = document.getElementById('alertas-container');\r\n    alertasContainer.innerHTML = ''; // Limpia el contenido anterior\r\n}\r\n\r\n","(function() {\r\n    // Variables para almacenar los valores originales de los campos\r\n    let nombreOriginal = '';\r\n    let apellidoOriginal = '';\r\n    let emailOriginal = '';\r\n    let passOriginal = '';\r\n    let pass2Original = '';\r\n\r\n\r\n\r\n    async function manejarFormularioRegistro(formulario) {\r\n        const datos = new FormData();\r\n        datos.append(\"nombre\", formulario.elements['nombre'].value);\r\n        datos.append(\"apellido\", formulario.elements['apellido'].value);\r\n        datos.append(\"email\", formulario.elements['email'].value);\r\n        datos.append(\"password\", formulario.elements['password'].value);\r\n        datos.append(\"password2\", formulario.elements['password2'].value);\r\n\r\n        const respuesta = await fetch('/api/usuarios/registro', {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n        \r\n        try {\r\n            const resultado = await respuesta.json();\r\n            if (resultado.tipo === 'error') {\r\n               // Guarda los valores originales de los campos\r\n               nombreOriginal = formulario.elements['nombre'].value;\r\n               apellidoOriginal = formulario.elements['apellido'].value;\r\n               emailOriginal = formulario.elements['email'].value;\r\n\r\n               // Limpia el campo de contraseña\r\n               formulario.elements['password'].value = '';\r\n               formulario.elements['password2'].value = '';\r\n\r\n               // Mostrar alertas\r\n               mostrarAlertas(resultado.alertas.error);\r\n\r\n            } else if (resultado.tipo === 'exito') {\r\n                // Restablece los valores originales de los campos\r\n                formulario.elements['nombre'].value = nombreOriginal;\r\n                formulario.elements['apellido'].value = apellidoOriginal;\r\n                formulario.elements['email'].value = emailOriginal;\r\n                formulario.elements['password'].value = passOriginal;\r\n                formulario.elements['password2'].value = pass2Original;\r\n\r\n                // Manejar éxito\r\n                console.log(resultado.datos);\r\n\r\n                // Cerrar Modal\r\n                cerrarModal();\r\n                const modales = document.querySelectorAll(\".modal\");\r\n                modales.forEach(modal => {\r\n                    modal.style.display = \"none\";\r\n                })\r\n\r\n                // Alerta de éxito\r\n                usuarioCreado();\r\n            }\r\n        } catch (error) {\r\n            // Manejar el caso en que no se reciba una respuesta JSON válida\r\n            console.error(\"Error al analizar la respuesta JSON del servidor\");\r\n        }\r\n    }\r\n\r\n    function mostrarAlertas(alertas) {\r\n        const alertasContainer = document.getElementById('alertas-container');\r\n        alertasContainer.innerHTML = ''; // Limpia el contenido anterior\r\n\r\n        if (alertas && alertas.length > 0) {\r\n            setTimeout(() => {\r\n                const alertasDiv = document.createElement('div');\r\n                alertasDiv.classList.add('alert', 'alert-danger');\r\n\r\n                const ul = document.createElement('ul');\r\n                alertas.forEach(alerta => {\r\n                    const li = document.createElement('li');\r\n                    li.textContent = alerta;\r\n                    ul.appendChild(li);\r\n                });\r\n\r\n                alertasDiv.appendChild(ul);\r\n                alertasContainer.appendChild(alertasDiv);\r\n            }, 200);\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    async function manejarFormularioLogin(formulario) {\r\n        const datos = new FormData();\r\n        datos.append(\"email\", formulario.elements['email'].value);\r\n        datos.append(\"password\", formulario.elements['password'].value);\r\n\r\n        const respuesta = await fetch('/api/usuarios/login', {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n        \r\n        const resultado = await respuesta.json();\r\n\r\n        // Maneja la respuesta del servidor\r\n        // ...\r\n    }\r\n\r\n    async function manejarFormularioOlvidePassword(formulario) {\r\n        const datos = new FormData();\r\n        datos.append(\"email\", formulario.elements['email'].value);\r\n\r\n        const respuesta = await fetch('/api/usuarios/olvidePassword', {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n        \r\n        const resultado = await respuesta.json();\r\n\r\n        // Maneja la respuesta del servidor\r\n        // ...\r\n    }\r\n\r\n    const formularioRegistro = document.querySelector('#registro .formulario');\r\n    const formularioLogin = document.querySelector('#login .formulario');\r\n    const formularioOlvidePassword = document.querySelector('#olvide .formulario');\r\n\r\n    formularioRegistro.addEventListener('submit', function(event) {\r\n        event.preventDefault();\r\n        manejarFormularioRegistro(formularioRegistro);\r\n    });\r\n\r\n    formularioLogin.addEventListener('submit', function(event) {\r\n        event.preventDefault();\r\n        manejarFormularioLogin(formularioLogin);\r\n    });\r\n\r\n    formularioOlvidePassword.addEventListener('submit', function(event) {\r\n        event.preventDefault();\r\n        manejarFormularioOlvidePassword(formularioOlvidePassword);\r\n    });\r\n\r\n\r\n    \r\n    window.resetearFormulario = function () {\r\n        const formularioActual = document.querySelector('.auth__modal .formulario');\r\n        resetearFormulario(formularioActual);\r\n    };\r\n\r\n\r\n    function usuarioCreado() {\r\n        Swal.fire({\r\n            icon: 'success',\r\n            title: 'Usuario Registrado',\r\n            text: 'Verifica tu mail para confirmar la cuenta',\r\n            confirmButtonText: 'OK',\r\n            willClose: () => {\r\n                // Esta función se ejecutará cuando se cierre el cuadro de diálogo\r\n                document.body.style.overflow = \"auto\";\r\n            }\r\n        })\r\n    }\r\n})();\r\n"]}