{"version":3,"sources":["app.js","auth.js","tags.js"],"names":["seleccionarArchivo","document","getElementById","click","mostrarNombreArchivo","input","mensaje","nombreArchivo","files","length","name","textContent","autocompletadoFormulario","querySelectorAll","forEach","addEventListener","label","this","nextElementSibling","value","classList","add","remove","modalAuth","fondoNegro","modalLogin","querySelector","modalRegistro","modalOlvide","btnLogin","btnRegistro","btnOlvide","btnCerrar","abrirModal","btn","cerrarModal","modal","closest","setTimeout","style","display","body","overflow","reset","window","event","fondo","target","botonActual","modalActual","modal1","modal2","e","preventDefault","cambiarModal","reiniciarFormu","modalAnimacion","modal3","children","toggle","limpiarAlertas","limpiarLabels","formu","acciones","auth","accion","tipo","campo","alertaElemento","inputCampo","toLowerCase","iconoCampo","async","manejarFormularioRegistro","formulario","spinner","datos","FormData","append","elements","respuesta","fetch","method","resultado","json","mostrarAlertas","alertas","error","Swal","fire","icon","title","text","confirmButtonText","willClose","console","manejarFormularioOlvidePassword","alerta","campoId","includes","formularioRegistro","formularioLogin","formularioOlvidePassword","admin","location","href","manejarFormularioLogin","resetearFormulario","formularioActual","tagsInput","tagsDiv","tagsInputHidden","tags","eliminarTag","filter","tag","actualizarInputHidden","toString","keyCode","trim","etiqueta","createElement","ondblclick","appendChild"],"mappings":"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","file":"bundle.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function() {\r\n    autocompletadoFormulario();\r\n    modalAuth();\r\n})\r\n\r\nfunction seleccionarArchivo() {\r\n    document.getElementById('imagenPonente').click();\r\n}\r\n\r\nfunction mostrarNombreArchivo() {\r\n    var input = document.getElementById('imagenPonente');\r\n    var mensaje = document.getElementById('mensajeArchivo');\r\n    var nombreArchivo = input.files.length > 0 ? input.files[0].name : 'No se ha seleccionado ningún archivo.';\r\n    mensaje.textContent = nombreArchivo;\r\n}\r\n\r\nfunction autocompletadoFormulario() {\r\n    // Selecciona todos los inputs\r\n    const inputs = document.querySelectorAll('.formulario__input');\r\n    \r\n    inputs.forEach(input => {\r\n        input.addEventListener('input', function() {\r\n            const label = this.nextElementSibling; // Suponiendo que el label siempre viene después del input\r\n       \r\n            // Si el input tiene contenido, mueve el label hacia arriba\r\n            if (this.value) {\r\n                label.classList.add('formulario__label--active');\r\n            } else {\r\n                label.classList.remove('formulario__label--active');\r\n            }\r\n        });\r\n    });\r\n\r\n}\r\n\r\nfunction modalAuth() {\r\n    const fondoNegro = document.querySelectorAll(\".auth\");\r\n\r\n    const modalLogin = document.querySelector(\"#login\");\r\n    const modalRegistro = document.querySelector(\"#registro\");\r\n    const modalOlvide = document.querySelector(\"#olvide\");\r\n\r\n    const btnLogin = document.querySelectorAll(\".login\");\r\n    const btnRegistro = document.querySelectorAll(\".registro\");\r\n    const btnOlvide = document.querySelectorAll(\".olvide\");\r\n    const btnCerrar = document.querySelectorAll(\".modal__close\");\r\n\r\n    abrirModal(btnLogin, modalLogin, modalRegistro, modalOlvide);\r\n    abrirModal(btnRegistro, modalRegistro, modalLogin, modalOlvide);\r\n    abrirModal(btnOlvide, modalOlvide, modalLogin, modalRegistro);\r\n\r\n    btnCerrar.forEach(btn => {\r\n        btn.addEventListener(\"click\", function() {\r\n            cerrarModal();\r\n            const modal = this.closest(\".modal\");\r\n            setTimeout(() => {\r\n                modal.style.display = \"none\";\r\n                document.body.style.overflow = \"auto\";\r\n                modal.querySelector(\"form\").reset();\r\n            }, 200);\r\n        });\r\n    });\r\n\r\n    window.addEventListener(\"click\", function(event) {\r\n        fondoNegro.forEach(fondo => {\r\n            if (event.target === fondo) {\r\n                cerrarModal();\r\n\r\n                setTimeout(() => {\r\n                    const modales = document.querySelectorAll(\".modal\");\r\n                    modales.forEach(modal => {\r\n                        modal.style.display = \"none\";\r\n                        document.body.style.overflow = \"auto\"; // Permite el desplazamiento de nuevo\r\n                        modal.querySelector(\"form\").reset();\r\n                    })\r\n                }, 200);\r\n            }\r\n        })\r\n    });\r\n}\r\n\r\nfunction abrirModal(botonActual, modalActual, modal1, modal2) {\r\n    botonActual.forEach(btn => {\r\n        btn.addEventListener(\"click\", function(e) {\r\n            e.preventDefault();\r\n\r\n            cambiarModal();\r\n\r\n            // Agrega esta línea para restablecer el formulario dentro del otro modal\r\n            reiniciarFormu(modal1, modal2);\r\n            modalAnimacion(modalActual, modal1, modal2);\r\n        });\r\n    });\r\n}\r\n\r\nfunction modalAnimacion(modal, modal2, modal3) {\r\n    modal.style.display = \"block\";\r\n    modal2.style.display = \"none\";\r\n    modal3.style.display = \"none\";\r\n\r\n    document.body.style.overflow = \"hidden\"; // Evita el desplazamiento\r\n\r\n    setTimeout(() => {\r\n        modal.children[0].children[0].classList.toggle(\"animar\");\r\n    }, 50);\r\n}\r\n\r\nfunction cerrarModal() {\r\n    limpiarAlertas('Registro');\r\n    limpiarAlertas('Login');\r\n    limpiarAlertas('Olvide');\r\n    limpiarLabels('registro');\r\n    limpiarLabels('login');\r\n    limpiarLabels('olvide');\r\n    setTimeout(() => {\r\n        const auth = document.querySelectorAll(\".auth__modal\");\r\n        auth.forEach(formu => {\r\n            formu.classList.remove(\"animar\");\r\n        })\r\n    }, 0);\r\n}\r\n\r\n\r\nfunction cambiarModal() {\r\n    limpiarAlertas('Registro');\r\n    limpiarAlertas('Login');\r\n    limpiarAlertas('Olvide');\r\n    limpiarLabels('registro');\r\n    limpiarLabels('login');\r\n    limpiarLabels('olvide');\r\n    const acciones = document.querySelectorAll(\".acciones__enlace\");\r\n    const auth = document.querySelectorAll(\".auth__modal\");\r\n    \r\n    acciones.forEach(accion => {\r\n        accion.addEventListener(\"click\", function(e) {\r\n            auth.forEach(modal => {\r\n                modal.classList.remove(\"animar\");\r\n            })\r\n        });\r\n    });\r\n\r\n}\r\n\r\nfunction reiniciarFormu(modal1, modal2) {\r\n    // Agrega esta línea para restablecer el formulario dentro del otro modal\r\n    modal1.querySelector(\"form\").reset();\r\n    modal2.querySelector(\"form\").reset();\r\n}\r\n\r\nfunction limpiarLabels(tipo) {\r\n    // Seleccionar solo los labels dentro del formulario de registro\r\n    const labels = document.querySelectorAll('#' + tipo + ' .formulario__label');\r\n    \r\n    labels.forEach(label => {\r\n        label.classList.remove(\"formulario__label--active\");\r\n    })\r\n}\r\n\r\nfunction limpiarAlertas(tipo) {\r\n        // Itera sobre todos los campos y limpia las alertas y estilos previos\r\n        ['Nombre', 'Apellido', 'Email', 'Email2', 'Password', 'Password2'].forEach((campo) => {\r\n            const alertaElemento = document.getElementById('alerta' + campo + tipo);\r\n            const inputCampo = document.getElementById(campo.toLowerCase() + tipo);\r\n            const iconoCampo = document.getElementById(campo.toLowerCase() + tipo + 'Icono');\r\n\r\n            if (alertaElemento) {\r\n                alertaElemento.textContent = '';\r\n                alertaElemento.classList.remove(\"error\");\r\n            }\r\n    \r\n            if (inputCampo) {\r\n                inputCampo.classList.remove(\"error-input\");\r\n            }\r\n\r\n            if (iconoCampo) {\r\n                iconoCampo.classList.remove(\"error-icono\");\r\n            }\r\n\r\n\r\n        });\r\n}\r\n\r\n","(function() {\r\n\r\n    async function manejarFormularioRegistro(formulario) {\r\n        const spinners = document.querySelectorAll(\".spinner-contenedor\");\r\n        spinners.forEach(spinner => {\r\n            spinner.style.display = 'flex'; // Muestra el spinner\r\n        })\r\n\r\n        const datos = new FormData();\r\n        datos.append(\"nombre\", formulario.elements['nombre'].value);\r\n        datos.append(\"apellido\", formulario.elements['apellido'].value);\r\n        datos.append(\"email\", formulario.elements['email'].value);\r\n        datos.append(\"password\", formulario.elements['password'].value);\r\n        datos.append(\"password2\", formulario.elements['password2'].value);\r\n\r\n        const respuesta = await fetch('/api/usuarios/registro', {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n        \r\n        try {\r\n            const resultado = await respuesta.json();\r\n            if (resultado.tipo === 'error') {\r\n               // Guarda los valores originales de los campos\r\n               formulario.elements['nombre'].value;\r\n               formulario.elements['apellido'].value;\r\n               formulario.elements['email'].value;\r\n                \r\n               // Limpia el campo de contraseña\r\n               formulario.elements['password'].value = '';\r\n               formulario.elements['password2'].value = '';\r\n\r\n               // Mostrar alertas\r\n               mostrarAlertas(resultado.alertas.error, \"Registro\");\r\n\r\n            } else if (resultado.tipo === 'exito') {\r\n                // Restablece los valores originales de los campos\r\n                formulario.elements['nombre'].value = '';\r\n                formulario.elements['apellido'].value = '';\r\n                formulario.elements['email'].value = '';\r\n                formulario.elements['password'].value = '';\r\n                formulario.elements['password2'].value = '';\r\n\r\n                // Cerrar Modal\r\n                cerrarModal();\r\n                const modales = document.querySelectorAll(\".modal\");\r\n                modales.forEach(modal => {\r\n                    modal.style.display = \"none\";\r\n                })\r\n\r\n                // Alerta de éxito\r\n                usuarioCreado();\r\n                \r\n            }\r\n        } catch (error) {\r\n            // Manejar el caso en que no se reciba una respuesta JSON válida\r\n            console.error(\"Error al analizar la respuesta JSON del servidor\");\r\n        } finally {\r\n            const spinners = document.querySelectorAll(\".spinner-contenedor\");\r\n            spinners.forEach(spinner => {\r\n                spinner.style.display = 'none'; // Oculta el spinner cuando la acción se completa\r\n            })\r\n        }\r\n    }\r\n\r\n    \r\n    \r\n    async function manejarFormularioLogin(formulario) {\r\n        const datos = new FormData();\r\n        datos.append(\"email\", formulario.elements['email'].value);\r\n        datos.append(\"password\", formulario.elements['password'].value);\r\n    \r\n        const respuesta = await fetch('/api/usuarios/login', {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n        \r\n    \r\n        try {\r\n            const resultado = await respuesta.json();\r\n            \r\n            if (resultado.tipo === 'error') {\r\n                // Guarda los valores originales de los campos  \r\n                formulario.elements['email'].value;\r\n\r\n                // Limpia el campo de contraseña\r\n                formulario.elements['password'].value = '';\r\n    \r\n                // Muestra alertas de error\r\n                mostrarAlertas(resultado.alertas.error, \"Login\");\r\n\r\n            } else if (resultado.tipo === 'exito') {\r\n                // Restablece los valores originales del formulario\r\n                formulario.elements['email'].value = '';\r\n                formulario.elements['password'].value = '';\r\n    \r\n                // Cierra el modal\r\n                cerrarModal();\r\n                const modales = document.querySelectorAll(\".modal\");\r\n                modales.forEach(modal => {\r\n                    modal.style.display = \"none\";\r\n                });\r\n    \r\n                if(resultado.datos.admin === \"1\") {\r\n                    window.location.href = \"/admin/dashboard\";\r\n                } else {\r\n                    window.location.href = \"/finalizar-registro\";\r\n                }\r\n                \r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error al analizar la respuesta JSON del servidor\");\r\n        }\r\n    }\r\n\r\n    async function manejarFormularioOlvidePassword(formulario) {\r\n        const spinners = document.querySelectorAll(\".spinner-contenedor\");\r\n        spinners.forEach(spinner => {\r\n            spinner.style.display = 'flex'; // Muestra el spinner\r\n        })\r\n\r\n        const datos = new FormData();\r\n        datos.append(\"email\", formulario.elements['email'].value);\r\n\r\n        const respuesta = await fetch('/api/usuarios/olvidePassword', {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n        \r\n        try {\r\n            const resultado = await respuesta.json();\r\n\r\n\r\n            if (resultado.tipo === 'error') {\r\n                // Guarda los valores originales de los campos  \r\n                formulario.elements['email'].value;\r\n    \r\n                // Muestra alertas de error\r\n                mostrarAlertas(resultado.alertas.error, \"Olvide\");\r\n\r\n            } else if (resultado.tipo === 'exito') {\r\n                // Restablece los valores originales del formulario\r\n\r\n                formulario.elements['email'].value = '';\r\n    \r\n                // Cerrar Modal\r\n                cerrarModal();\r\n                const modales = document.querySelectorAll(\".modal\");\r\n                modales.forEach(modal => {\r\n                    modal.style.display = \"none\";\r\n                })\r\n\r\n                // Alerta de éxito\r\n                alertaRestablecer();\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error al analizar la respuesta JSON del servidor\");\r\n        } finally {\r\n            const spinners = document.querySelectorAll(\".spinner-contenedor\");\r\n            spinners.forEach(spinner => {\r\n                spinner.style.display = 'none'; // Oculta el spinner cuando la acción se completa\r\n            })\r\n        }\r\n    }\r\n\r\n    function mostrarAlertas(alertas, tipo) {\r\n        // Itera sobre todos los campos y limpia las alertas y estilos previos\r\n        ['Nombre', 'Apellido', 'Email', 'Email2', 'Password', 'Password2'].forEach((campo) => {\r\n            const alertaElemento = document.getElementById('alerta' + campo + tipo);\r\n            const inputCampo = document.getElementById(campo.toLowerCase() + tipo);\r\n            const iconoCampo = document.getElementById(campo.toLowerCase() + tipo + 'Icono');\r\n\r\n            if (alertaElemento) {\r\n                alertaElemento.textContent = '';\r\n                alertaElemento.classList.remove(\"error\");\r\n            }\r\n    \r\n            if (inputCampo) {\r\n                inputCampo.classList.remove(\"error-input\");\r\n            }\r\n\r\n            if (iconoCampo) {\r\n                iconoCampo.classList.remove(\"error-icono\");\r\n            }\r\n\r\n\r\n        });\r\n    \r\n        if (alertas && alertas.length > 0) {\r\n            alertas.forEach((alerta) => {\r\n                // Asigna un identificador específico para cada campo\r\n                let campoId = \"\";\r\n    \r\n                // Identifica el campo según el contenido de la alerta \r\n                if (alerta.includes('Nombre')) {\r\n                    campoId = 'Nombre';\r\n                } else if (alerta.includes('Apellido')) {\r\n                    campoId = 'Apellido';\r\n                } else if (alerta.includes('Email')) {\r\n                    campoId = 'Email';\r\n                } else if (alerta.includes('mayor')) {\r\n                    campoId = 'Password';\r\n                } else if (alerta.includes('coinciden')) {\r\n                    campoId = 'Password2';\r\n                } else if (alerta.includes('registrado')) {\r\n                    campoId = 'Email2';\r\n                } else if (alerta.includes('Incorrecto')) {\r\n                    campoId = 'Password2';\r\n                } else if (alerta.includes('confirmado')) {\r\n                    campoId = 'Email2';\r\n                }\r\n    \r\n                // Construye el ID completo del elemento donde se mostrará la alerta\r\n                const alertaElemento = document.getElementById('alerta' + campoId + tipo);\r\n                const inputCampo = document.getElementById(campoId.toLowerCase() + tipo);\r\n                const iconoCampo = document.getElementById(campoId.toLowerCase() + tipo + 'Icono');\r\n\r\n                if (alertaElemento) {\r\n                    alertaElemento.textContent = alerta;\r\n                    setTimeout(() => {\r\n                        alertaElemento.classList.add(\"error\");\r\n                    }, 0);\r\n                }\r\n    \r\n                if (inputCampo) {\r\n                    inputCampo.classList.add(\"error-input\");\r\n                }\r\n\r\n                if (iconoCampo) {\r\n                    iconoCampo.classList.add(\"error-icono\");\r\n                }\r\n            \r\n            });\r\n        }\r\n    }\r\n\r\n    const formularioRegistro = document.querySelector('#registro .formulario');\r\n    const formularioLogin = document.querySelector('#login .formulario');\r\n    const formularioOlvidePassword = document.querySelector('#olvide .formulario');\r\n\r\n    if(formularioRegistro) {\r\n        formularioRegistro.addEventListener('submit', function(event) {\r\n            event.preventDefault();\r\n            manejarFormularioRegistro(formularioRegistro);\r\n        });\r\n    }\r\n\r\n    if(formularioLogin) {\r\n        formularioLogin.addEventListener('submit', function(event) {\r\n            event.preventDefault();\r\n            manejarFormularioLogin(formularioLogin);\r\n        });\r\n    }\r\n\r\n    if(formularioOlvidePassword) {\r\n        formularioOlvidePassword.addEventListener('submit', function(event) {\r\n            event.preventDefault();\r\n            manejarFormularioOlvidePassword(formularioOlvidePassword);\r\n        });\r\n    }\r\n\r\n    \r\n    window.resetearFormulario = function () {\r\n        const formularioActual = document.querySelector('.auth__modal .formulario');\r\n        resetearFormulario(formularioActual);\r\n    };\r\n\r\n\r\n    function usuarioCreado() {\r\n        Swal.fire({\r\n            icon: 'success',\r\n            title: 'Usuario Registrado',\r\n            text: 'Verifica tu mail para confirmar la cuenta',\r\n            confirmButtonText: 'OK',\r\n            willClose: () => {\r\n                // Esta función se ejecutará cuando se cierre el cuadro de diálogo\r\n                document.body.style.overflow = \"auto\";\r\n            }\r\n        })\r\n    }\r\n\r\n    function alertaRestablecer() {\r\n        Swal.fire({\r\n            icon: 'success',\r\n            title: 'Verifica tu email',\r\n            text: 'Verifica tu mail para cambiar el password',\r\n            confirmButtonText: 'OK',\r\n            willClose: () => {\r\n                // Esta función se ejecutará cuando se cierre el cuadro de diálogo\r\n                document.body.style.overflow = \"auto\";\r\n            }\r\n        })\r\n    }\r\n})();\r\n","(function() {\r\n    const tagsInput = document.querySelector(\"#tags_input\");\r\n\r\n    if(tagsInput) {\r\n        \r\n        const tagsDiv = document.querySelector(\"#tags\");\r\n        const tagsInputHidden = document.querySelector('[name=\"tags\"]');\r\n\r\n        let tags = [];\r\n\r\n        // Escuchar los cambios en el input \r\n        tagsInput.addEventListener('keypress', guardarTag);\r\n\r\n        function guardarTag(e) {\r\n            // Evitar que se agreguen tags repetidos                \r\n            if(e.keyCode === 44) {\r\n                if(e.target.value.trim() === '' || e.target.value < 1 || tags.includes(e.target.value)) {\r\n                    e.preventDefault();\r\n                    e.target.value = '';                    \r\n                    return;\r\n                }\r\n                e.preventDefault();\r\n                tags = [...tags, e.target.value.trim()];\r\n                tagsInput.value = '';\r\n                mostrarTags();\r\n            }\r\n        }\r\n\r\n        function mostrarTags() {\r\n            tagsDiv.textContent = '';\r\n            tags.forEach(tag => {\r\n                const etiqueta = document.createElement(\"LI\");\r\n                etiqueta.classList.add(\"formulario__tag\");\r\n                etiqueta.textContent = tag;\r\n                etiqueta.ondblclick = eliminarTag;\r\n                tagsDiv.appendChild(etiqueta);\r\n            });\r\n\r\n            actualizarInputHidden();\r\n        }\r\n\r\n        function eliminarTag(e) {\r\n            e.target.remove();\r\n\r\n            tags = tags.filter(tag => tag !== e.target.textContent);\r\n            actualizarInputHidden();\r\n        }\r\n\r\n        function actualizarInputHidden() {\r\n            tagsInputHidden.value = tags.toString();\r\n        }\r\n    }\r\n})();"]}